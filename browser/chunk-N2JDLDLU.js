import{d as c}from"./chunk-SKDPH5QL.js";import{a as l}from"./chunk-53HZMJ3F.js";import{l as s}from"./chunk-YR3GNGTJ.js";import{P as r,S as a,X as n}from"./chunk-PQFGVKFM.js";var k=(()=>{class o{httpcliente;router;LOGIN_URL=l.apiUrl+"/api/auth/login";tokenKey="authToken";constructor(t,e){this.httpcliente=t,this.router=e}login(t,e){return this.httpcliente.post(this.LOGIN_URL,{correo:t,password:e}).pipe(r(i=>{i.token&&(console.log(i.token),this.setToken(i.token))}))}setToken(t){localStorage.setItem(this.tokenKey,t)}getToken(){return localStorage.getItem(this.tokenKey)}isAuthenticated(){let t=this.getToken();if(!t)return!1;let i=JSON.parse(atob(t.split(".")[1])).exp*1e3;return Date.now()<i}logout(){localStorage.removeItem(this.tokenKey),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)(n(s),n(c))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();export{k as a};
